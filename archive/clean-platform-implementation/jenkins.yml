# Jenkins-in-Docker Configuration
# This configures the JiD instance for the platform team

# Okta authentication configuration
okta:
  # Replace ${OKTA_APP_ID} with your actual Okta application ID from NR-Prod Okta
  idp_metadata_url: https://nr-prod.okta.com/app/${OKTA_APP_ID}/sso/saml/metadata
  sp_entity_id: platform-team-jenkins-in-docker
  allowed_groups:
    - platform-team
    - platform-team-readonly

# Users with access to Jenkins
users:
  - name: "platform-team@newrelic.com"
  - name: "platform-oncall@newrelic.com"
  - name: platform-developers

# Allow read access for monitoring
allow_read_access_for_all_users: false

# Jenkins plugins
plugins:
  - name: github-pullrequest
  - name: slack
  - name: pipeline-utility-steps
  - name: timestamper
  - name: ansicolor
  - name: build-timeout
  - name: credentials-binding
  - name: ws-cleanup
  - name: prometheus
  - name: sonar
  - name: dependency-check-jenkins-plugin
  - name: docker-workflow
  - name: kubernetes
  - name: hashicorp-vault-plugin

# Backup configuration
backup:
  enabled: true
  retention_days: 30
  s3_bucket: platform-team-jenkins-backups

# Resource allocation
resources:
  memory: 4Gi
  cpu: 2

# Jenkins configuration
restart_hour: 3  # 3 AM UTC
disable_restart: false

# Build parameters
build_timeout_minutes: 60
concurrent_builds: 5

# Monitoring
monitoring:
  prometheus_enabled: true
  metrics_port: 9090