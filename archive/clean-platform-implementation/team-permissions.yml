# Team Permissions Configuration
# This file should be added to the team-permissions repository

# Get your TeamStore ID from https://team-store.datanerd.one/
team_store_id: ${TEAMSTORE_ID}  # REQUIRED: Replace with actual TeamStore ID
permissions:
  vault:
    policy:
      rules:
        # Service secrets
        - path: containers/teams/platform-team/*
          capabilities: [create, read, update, delete, list]
        # Shared secrets access
        - path: shared/production/clean-platform/*
          capabilities: [read, list]
        - path: shared/staging/clean-platform/*
          capabilities: [read, list]
        # Discovery endpoints
        - path: discovery/*/clean-platform/*
          capabilities: [read, list]
        # Certificate access
        - path: certs/data/clean-platform.nr-ops.net/*
          capabilities: [read, list]
        # Database credentials (from Tim Allen)
        - path: terraform/platform-team/*/*
          capabilities: [read, list]
  
  aws:
    iam:
      - accounts:
          workloads:
            - clean-platform
            - platform-shared
        roles:
          predefined:
            - EKS-Dev
            - EKS-ReadOnly
      # Database enclave access for Tim Allen deployments
      - accounts:
          ids:
            - "895102219545"  # eu-frank-smoke
            - "392988681574"  # stg-long-ladder
            - "707672555654"  # stg-unusual-mixture
            - "008042298050"  # us-feral-hog
            - "035007573400"  # us-snowy-bed
        roles:
          predefined:
            - NRReadOnly
  
  okta:
    production:
      applications:
        - pagerduty
        - github-enterprise
        - jenkins
        - grand-central
        - vault
  
  github:
    organizations:
      - platform-team
    repositories:
      - platform-team/clean-platform-implementation
      - platform-team/aws-db-deploys
      - platform-team/terraform-modules
  
  pagerduty:
    services:
      - platform-team-primary
      - platform-team-database
      - platform-team-oncall

# VPN access
vpn: true

# Monitoring access
monitoring:
  nr1_accounts:
    - 314008  # BaD Tools account
    - 754495  # Database monitoring